<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Zif::Game
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Zif::Game";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span>
     &raquo; 
    <span class="title">Game</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Zif::Game
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Zif::Game</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Traceable.html" title="Zif::Traceable (module)">Traceable</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/zif/game.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The main entrypoint for your game.</p>

<p>Orchestrates main tick &amp; active <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span>.</p>

<p>It’s suggested to subclass this so that you can set the opening scene during <span class='object_link'><a href="#initialize-instance_method" title="Zif::Game#initialize (method)">#initialize</a></span>, see example below.</p>

<p>Includes <code>attr_gtk</code> – supports what DRGTK provides for these classes in addition to what is documented here. <a href="http://docs.dragonruby.org/#----attr_gtk.rb">docs.dragonruby.org/#—-attr_gtk.rb</a></p>

<p>Expects the <span class='object_link'><a href="#scene-instance_method" title="Zif::Game#scene (method)">#scene</a></span> to be an object which responds to <code>#perform_tick</code> (See <span class='object_link'><a href="Scene.html#perform_tick-instance_method" title="Zif::Scene#perform_tick (method)">Scene#perform_tick</a></span>) If <tt>@scene.perform_tick</tt> returns an instance of <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span>, the game will switch to that scene</p>

<p>If you need some more advanced usage, you can override <span class='object_link'><a href="#perform_tick-instance_method" title="Zif::Game#perform_tick (method)">#perform_tick</a></span> to pass a block to <span class='object_link'><a href="#standard_tick-instance_method" title="Zif::Game#standard_tick (method)">#standard_tick</a></span> and do something with the <tt>@scene.perform_tick</tt> return value (See second example).</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Suggested initialization procedure:</p>
</div></p>
      
      <pre class="example code"><code>
<span class='comment'># =-=-=- In your app/my_game.rb -=-=-=
</span><span class='kw'>class</span> <span class='const'>MyGame</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'>Game</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
    <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='const'>MyOneTime</span><span class='period'>.</span><span class='id identifier rubyid_setups'>setups</span> <span class='comment'># do anything here, like register services...
</span>    <span class='id identifier rubyid_register_scene'>register_scene</span><span class='lparen'>(</span><span class='symbol'>:rainbow_road</span><span class='comma'>,</span> <span class='const'>RainbowRoadScene</span><span class='rparen'>)</span> <span class='comment'># (RainbowRoadScene is a Zif::Scene subclass)
</span>    <span class='ivar'>@scene</span> <span class='op'>=</span> <span class='const'>OpeningScene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='comment'># (this is a Zif::Scene subclass)
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># =-=-=- In your app/main.rb -=-=-=
</span><span class='comment'># Require all of the Zif library:
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lib/zif/require.rb</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_game.rb</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>def</span> <span class='id identifier rubyid_tick'><span class='object_link'><a href="../top-level-namespace.html#tick-instance_method" title="#tick (method)">tick</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_tick_count'>tick_count</span> <span class='op'>==</span> <span class='int'>2</span>
    <span class='gvar'>$game</span> <span class='op'>=</span> <span class='const'>MyGame</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='gvar'>$game</span><span class='period'>.</span><span class='id identifier rubyid_scene'>scene</span><span class='period'>.</span><span class='id identifier rubyid_prepare_scene'>prepare_scene</span> <span class='comment'># if needed on first scene
</span>  <span class='kw'>end</span>

  <span class='gvar'>$game</span><span class='op'>&amp;.</span><span class='id identifier rubyid_perform_tick'>perform_tick</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>Custom scene switching behavior (advanced):</p>
</div></p>
      
      <pre class="example code"><code>
<span class='comment'># =-=-=- In your MyGame class in app/my_game.rb -=-=-=
</span><span class='comment'># You would only need to override #perform_tick if you are doing something advanced.  Generally you can just
</span><span class='comment'># use the normal scene switching mechanisms described in the example above.
</span><span class='comment'>#
</span><span class='comment'># Important that this isn&#39;t named #tick, otherwise it gets suppressed by &quot;trace!&quot;
</span><span class='kw'>def</span> <span class='id identifier rubyid_perform_tick'>perform_tick</span>
  <span class='comment'># tick_result here is just the return value of the active scene&#39;s #perform_tick method
</span>  <span class='id identifier rubyid_standard_tick'>standard_tick</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_tick_result'>tick_result</span>
    <span class='kw'>when</span> <span class='symbol'>:load_water_level</span>
      <span class='id identifier rubyid_water_level'>water_level</span> <span class='op'>=</span> <span class='const'>WaterLevelScene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_water_level'>water_level</span><span class='period'>.</span><span class='id identifier rubyid_do_special_stuff'>do_special_stuff</span> <span class='comment'># like something you can&#39;t do in #prepare_scene for whatever reason
</span>      <span class='ivar'>@scene</span> <span class='op'>=</span> <span class='id identifier rubyid_water_level'>water_level</span>
    <span class='kw'>else</span> <span class='comment'># an unhandled return
</span>      <span class='ivar'>@scene</span> <span class='op'>=</span> <span class='const'>OpeningScene</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="../ExampleApp/ZifExample.html" title="ExampleApp::ZifExample (class)">ExampleApp::ZifExample</a></span></p>
</div>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#scene-instance_method" title="#scene (instance method)">#<strong>scene</strong>  &#x21d2; Zif::Scene </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The active scene.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#scene_registry-instance_method" title="#scene_registry (instance method)">#<strong>scene_registry</strong>  &#x21d2; Hash&lt;Symbol, Class&lt;Zif::Scene&gt;&gt; </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A mapping of scene names to classes.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#services-instance_method" title="#services (instance method)">#<strong>services</strong>  &#x21d2; Zif::Services::ServiceGroup </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A handle for all services.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="Traceable.html" title="Zif::Traceable (module)">Traceable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Traceable.html#tracer_service_name-instance_method" title="Zif::Traceable#tracer_service_name (method)">#tracer_service_name</a></span></p>


  
    <h2>
      1. Public Interface
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Game </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>It’s suggested that you extend this and set <span class='object_link'><a href="#scene-instance_method" title="Zif::Game#scene (method)">#scene</a></span> manually, see the example above.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#perform_tick-instance_method" title="#perform_tick (instance method)">#<strong>perform_tick</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Override, or extend with <tt>super()</tt> if you need to pass a block to <span class='object_link'><a href="#standard_tick-instance_method" title="Zif::Game#standard_tick (method)">#standard_tick</a></span> or do anything else.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_scene-instance_method" title="#register_scene (instance method)">#<strong>register_scene</strong>(scene_name, scene)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Register a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> subclass by a Symbol name, for scene transitions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize-instance_method" title="#serialize (instance method)">#<strong>serialize</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      2. Private-ish methods
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decorate_exception-instance_method" title="#decorate_exception (instance method)">#<strong>decorate_exception</strong>(e)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#standard_tick-instance_method" title="#standard_tick (instance method)">#<strong>standard_tick</strong>(&amp;_block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generally this shouldn’t be called directly, unless you are extending <span class='object_link'><a href="#perform_tick-instance_method" title="Zif::Game#perform_tick (method)">#perform_tick</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_scene-instance_method" title="#switch_scene (instance method)">#<strong>switch_scene</strong>(tick_result)  &#x21d2; Zif::Scene </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>An instance of a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> to transition to.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Traceable.html" title="Zif::Traceable (module)">Traceable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Traceable.html#mark-instance_method" title="Zif::Traceable#mark (method)">#mark</a></span>, <span class='object_link'><a href="Traceable.html#mark_and_print-instance_method" title="Zif::Traceable#mark_and_print (method)">#mark_and_print</a></span>, <span class='object_link'><a href="Traceable.html#mark_prefix-instance_method" title="Zif::Traceable#mark_prefix (method)">#mark_prefix</a></span>, <span class='object_link'><a href="Traceable.html#tracer-instance_method" title="Zif::Traceable#tracer (method)">#tracer</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Zif::Game (class)">Game</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>It’s suggested that you extend this and set <span class='object_link'><a href="#scene-instance_method" title="Zif::Game#scene (method)">#scene</a></span> manually, see the example above.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82
83
84
85
86
87
88
89
90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='gvar'>$services</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services.html" title="Zif::Services (module)">Services</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services/ServiceGroup.html" title="Zif::Services::ServiceGroup (class)">ServiceGroup</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Services/ServiceGroup.html#initialize-instance_method" title="Zif::Services::ServiceGroup#initialize (method)">new</a></span></span>
  <span class='ivar'>@services</span> <span class='op'>=</span> <span class='gvar'>$services</span>
  <span class='ivar'>@services</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='symbol'>:action_service</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services.html" title="Zif::Services (module)">Services</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services/ActionService.html" title="Zif::Services::ActionService (class)">ActionService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Services/ActionService.html#initialize-instance_method" title="Zif::Services::ActionService#initialize (method)">new</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@tracer_service_name</span> <span class='op'>=</span> <span class='symbol'>:tracer</span>
  <span class='ivar'>@services</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='ivar'>@tracer_service_name</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services.html" title="Zif::Services (module)">Services</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services/TickTraceService.html" title="Zif::Services::TickTraceService (class)">TickTraceService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Services/TickTraceService.html#initialize-instance_method" title="Zif::Services::TickTraceService#initialize (method)">new</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@services</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='symbol'>:sprite_registry</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services.html" title="Zif::Services (module)">Services</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services/SpriteRegistry.html" title="Zif::Services::SpriteRegistry (class)">SpriteRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Services/SpriteRegistry.html#initialize-instance_method" title="Zif::Services::SpriteRegistry#initialize (method)">new</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@services</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='symbol'>:input_service</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services.html" title="Zif::Services (module)">Services</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Services/InputService.html" title="Zif::Services::InputService (class)">InputService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Services/InputService.html#initialize-instance_method" title="Zif::Services::InputService#initialize (method)">new</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@scene_registry</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@pause_actions</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='period'>.</span><span class='id identifier rubyid_check_compatibility'><span class='object_link'><a href="../Zif.html#check_compatibility-class_method" title="Zif.check_compatibility (method)">check_compatibility</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="scene=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="scene-instance_method">
  
    #<strong>scene</strong>  &#x21d2; <tt><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The active scene.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The active scene</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scene'>scene</span>
  <span class='ivar'>@scene</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="scene_registry-instance_method">
  
    #<strong>scene_registry</strong>  &#x21d2; <tt>Hash&lt;Symbol, Class&lt;<span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span>&gt;&gt;</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns A mapping of scene names to classes.  Use <span class='object_link'><a href="#register_scene-instance_method" title="Zif::Game#register_scene (method)">#register_scene</a></span> to add one.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol, Class&lt;<span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span>&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A mapping of scene names to classes.  Use <span class='object_link'><a href="#register_scene-instance_method" title="Zif::Game#register_scene (method)">#register_scene</a></span> to add one.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scene_registry'>scene_registry</span>
  <span class='ivar'>@scene_registry</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="services=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="services-instance_method">
  
    #<strong>services</strong>  &#x21d2; <tt><span class='object_link'><a href="Services/ServiceGroup.html" title="Zif::Services::ServiceGroup (class)">Zif::Services::ServiceGroup</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns A handle for all services.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Services/ServiceGroup.html" title="Zif::Services::ServiceGroup (class)">Zif::Services::ServiceGroup</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A handle for all services.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_services'>services</span>
  <span class='ivar'>@services</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="decorate_exception-instance_method">
  
    #<strong>decorate_exception</strong>(e)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184
185
186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_decorate_exception'>decorate_exception</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>=</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>120</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='int'>118</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n  </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_tick_trace_step'>tick_trace_step</span> <span class='op'>=</span> <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:tracer</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_last_label'>last_label</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tick_trace_step'>tick_trace_step</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception occurred after: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tick_trace_step'>tick_trace_step</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Exception occured before tracer service was initialized</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>-</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>118</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Serializable.html" title="Zif::Serializable (module)">Serializable</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
  <span class='id identifier rubyid_serialize'>serialize</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="perform_tick-instance_method">
  
    #<strong>perform_tick</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Override, or extend with <tt>super()</tt> if you need to pass a block to <span class='object_link'><a href="#standard_tick-instance_method" title="Zif::Game#standard_tick (method)">#standard_tick</a></span> or do anything else</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_perform_tick'>perform_tick</span>
  <span class='id identifier rubyid_standard_tick'>standard_tick</span> <span class='comment'># No block provided usually
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_scene-instance_method">
  
    #<strong>register_scene</strong>(scene_name, scene)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Register a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> subclass by a Symbol name, for scene transitions.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scene_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the scene to register.  If your scene returns this symbol from <span class='object_link'><a href="Scene.html#perform_tick-instance_method" title="Zif::Scene#perform_tick (method)">Scene#perform_tick</a></span>, this class will switch to this scene during <span class='object_link'><a href="#standard_tick-instance_method" title="Zif::Game#standard_tick (method)">#standard_tick</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>scene</span>
      
      
        <span class='type'>(<tt>Class&lt;<span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The class name of a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> subclass.  When invoked via the <code>scene_name</code>, a new instance of this class is created and switched to be the active scene.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_scene'>register_scene</span><span class='lparen'>(</span><span class='id identifier rubyid_scene_name'>scene_name</span><span class='comma'>,</span> <span class='id identifier rubyid_scene'>scene</span><span class='rparen'>)</span>
  <span class='ivar'>@scene_registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_scene_name'>scene_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_scene'>scene</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serialize-instance_method">
  
    #<strong>serialize</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Serializable.html" title="Zif::Serializable (module)">Serializable</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_serialize'>serialize</span>
  <span class='lbrace'>{</span>
    <span class='label'>scene:</span>  <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
    <span class='label'>tracer:</span> <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:tracer</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_last_label'>last_label</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="standard_tick-instance_method">
  
    #<strong>standard_tick</strong>(&amp;_block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generally this shouldn’t be called directly, unless you are extending <span class='object_link'><a href="#perform_tick-instance_method" title="Zif::Game#perform_tick (method)">#perform_tick</a></span>.  See example above.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>_block</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A block to run which is given the return value of the active <span class='object_link'><a href="#scene-instance_method" title="Zif::Game#scene (method)">#scene</a></span>‘s <code>#perform_tick</code> method</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_standard_tick'>standard_tick</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid__block'>_block</span><span class='rparen'>)</span>
  <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:tracer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reset_tick'>reset_tick</span>
  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: begin</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:input_service</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_process_click'>process_click</span>
  <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:input_service</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_process_key_event'>process_key_event</span>
  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: input_service #process_click</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_tick_result'>tick_result</span> <span class='op'>=</span> <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_perform_tick'>perform_tick</span>
  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: Scene #perform_tick complete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_next_scene'>next_scene</span> <span class='op'>=</span> <span class='id identifier rubyid_switch_scene'>switch_scene</span><span class='lparen'>(</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_next_scene'>next_scene</span>
    <span class='ivar'>@scene</span><span class='period'>.</span><span class='id identifier rubyid_unload_scene'>unload_scene</span>
    <span class='id identifier rubyid_next_scene'>next_scene</span><span class='period'>.</span><span class='id identifier rubyid_prepare_scene'>prepare_scene</span>
    <span class='ivar'>@scene</span> <span class='op'>=</span> <span class='id identifier rubyid_next_scene'>next_scene</span>
  <span class='kw'>else</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_tick_result'>tick_result</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: Scene switching handled</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: Action service complete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:action_service</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_run_all_actions'>run_all_actions</span>
  <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#standard_tick: Complete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:tracer</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_decorate_exception'>decorate_exception</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span>
  <span class='ivar'>@services</span><span class='lbracket'>[</span><span class='symbol'>:tracer</span><span class='rbracket'>]</span><span class='op'>&amp;.</span><span class='id identifier rubyid_finish'>finish</span>
  <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_console'>console</span>
  <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_pause!'>pause!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="switch_scene-instance_method">
  
    #<strong>switch_scene</strong>(tick_result)  &#x21d2; <tt><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Returns An instance of a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> to transition to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Zif::Scene</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An instance of a <span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span> to transition to.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_scene'>switch_scene</span><span class='lparen'>(</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tick_result'>tick_result</span> <span class='kw'>if</span> <span class='id identifier rubyid_tick_result'>tick_result</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tick_result'>tick_result</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>if</span> <span class='id identifier rubyid_tick_result'>tick_result</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Class</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@scene_registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@scene_registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="../Zif.html" title="Zif (module)">Zif</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Scene.html" title="Zif::Scene (class)">Scene</a></span></span>

  <span class='ivar'>@scene_registry</span><span class='lbracket'>[</span><span class='id identifier rubyid_tick_result'>tick_result</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Serializable.html" title="Zif::Serializable (module)">Serializable</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/game.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_serialize'>serialize</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Aug 15 20:07:39 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.2.2).
</div>

    </div>
  </body>
</html>