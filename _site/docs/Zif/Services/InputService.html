<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Zif::Services::InputService
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Zif::Services::InputService";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (I)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Zif.html" title="Zif (module)">Zif</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Services.html" title="Zif::Services (module)">Services</a></span></span>
     &raquo; 
    <span class="title">InputService</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Zif::Services::InputService
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Zif::Services::InputService</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/zif/services/input_service.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This service keeps track of sprites and other objects interested in responding to clicks and scroll events, and passes the events over to them when they occur.</p>

<p>Specifically, every tick <span class='object_link'><a href="../Game.html" title="Zif::Game (class)">Game</a></span> will invoke <span class='object_link'><a href="#process_click-instance_method" title="Zif::Services::InputService#process_click (method)">#process_click</a></span> on this service.</p>

<p>In turn, this calls <span class='object_link'><a href="../Clickable.html#clicked%3F-instance_method" title="Zif::Clickable#clicked? (method)">Clickable#clicked?</a></span> on all <span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span> objects which have been previously registered using <span class='object_link'><a href="#register_clickable-instance_method" title="Zif::Services::InputService#register_clickable (method)">#register_clickable</a></span>.</p>

<p>It expects each clickable object to define a <tt>#clicked?(point, kind)</tt> method.  If the sprite decides it has been clicked, it should return itself from this method.  Clicks are passed through to sprites based on their <code>z_index</code> value - if this value is nil, the service considers it to be at the bottom.</p>

<p><span class='object_link'><a href="#register_scrollable-instance_method" title="Zif::Services::InputService#register_scrollable (method)">#register_scrollable</a></span>, is analogous to <span class='object_link'><a href="#register_clickable-instance_method" title="Zif::Services::InputService#register_clickable (method)">#register_clickable</a></span> but for the scroll wheel. <code>#scrolled?</code> is expected to be defined, and it receives the mouse point and the direction of scrolling as arguments.  Only Camera defines <code>#scrolled?</code> out of the box.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span></li>
    
  </ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; InputService </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of InputService.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_click-instance_method" title="#process_click (instance method)">#<strong>process_click</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>rubocop:disable Metrics/PerceivedComplexity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_key_event-instance_method" title="#process_key_event (instance method)">#<strong>process_key_event</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_scroll-instance_method" title="#process_scroll (instance method)">#<strong>process_scroll</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_clickable-instance_method" title="#register_clickable (instance method)">#<strong>register_clickable</strong>(clickable, absorb_click: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a <span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span> object to the list of clickables to check every tick.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_key_pressable-instance_method" title="#register_key_pressable (instance method)">#<strong>register_key_pressable</strong>(key_pressable)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a <span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">KeyPressable</a></span> object to the list of keypressables to check every tick.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_scrollable-instance_method" title="#register_scrollable (instance method)">#<strong>register_scrollable</strong>(scrollable, absorb_scroll = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Scrollable objects should respond to #scroll?(point, direction) and optionally #absorb_scroll?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_clickable-instance_method" title="#remove_clickable (instance method)">#<strong>remove_clickable</strong>(clickable)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes an <span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span> from the clickables array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_key_pressable-instance_method" title="#remove_key_pressable (instance method)">#<strong>remove_key_pressable</strong>(key_pressable)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes an <span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">KeyPressable</a></span> from the keypressables array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_scrollable-instance_method" title="#remove_scrollable (instance method)">#<strong>remove_scrollable</strong>(scrollable)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes a scrollable from the scrollables array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the list of clickables, scrollables, etc.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Zif::Services::InputService (class)">InputService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of InputService.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@last_mouse_bits</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_reset'>reset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="process_click-instance_method">
  
    #<strong>process_click</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>rubocop:disable Metrics/PerceivedComplexity</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_click'>process_click</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@clickables</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='ivar'>@mouse_point</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='gvar'>$args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='gvar'>$args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_process_scroll'>process_scroll</span> <span class='comment'># Hanging this here for now.  It also needs @mouse_point
</span>
  <span class='id identifier rubyid_mouse_bits'>mouse_bits</span>      <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_button_bits'>button_bits</span>
  <span class='id identifier rubyid_mouse_up'>mouse_up</span>        <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_up'>up</span>
  <span class='id identifier rubyid_mouse_down'>mouse_down</span>      <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_down'>down</span> <span class='comment'># mouse_bits &gt; @last_mouse_bits
</span>  <span class='id identifier rubyid_mouse_only_down'>mouse_only_down</span> <span class='op'>=</span> <span class='id identifier rubyid_mouse_down'>mouse_down</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_mouse_up'>mouse_up</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_mouse_down'>mouse_down</span> <span class='op'>||</span> <span class='id identifier rubyid_mouse_up'>mouse_up</span> <span class='op'>||</span> <span class='ivar'>@expecting_mouse_up</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>

  <span class='id identifier rubyid_kind'>kind</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_mouse_up'>mouse_up</span>
           <span class='symbol'>:up</span>
         <span class='kw'>else</span>
           <span class='lparen'>(</span><span class='id identifier rubyid_mouse_down'>mouse_down</span> <span class='op'>?</span> <span class='symbol'>:down</span> <span class='op'>:</span> <span class='symbol'>:changed</span><span class='rparen'>)</span>
         <span class='kw'>end</span>

  <span class='id identifier rubyid_awaiting_clicks'>awaiting_clicks</span> <span class='op'>=</span> <span class='id identifier rubyid_mouse_only_down'>mouse_only_down</span> <span class='op'>?</span> <span class='ivar'>@clickables</span> <span class='op'>:</span> <span class='ivar'>@expecting_mouse_up</span>

  <span class='comment'># puts &quot;Zif::Services::InputService#process_click: #{@mouse_point} point, #{mouse_bits} bits, kind: #{kind}.&quot;
</span>  <span class='comment'># puts &quot;                                 #{awaiting_clicks.count} registered&quot;
</span>
  <span class='id identifier rubyid_awaiting_clicks'>awaiting_clicks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_clickable'>clickable</span><span class='op'>|</span>
    <span class='comment'># puts &quot;Zif::Services::InputService#process_click: clickable: #{clickable.class} #{clickable} -&gt; #{clickable.rect}&quot;
</span>
    <span class='id identifier rubyid_clicked_sprite'>clicked_sprite</span> <span class='op'>=</span> <span class='id identifier rubyid_clickable'>clickable</span><span class='period'>.</span><span class='id identifier rubyid_clicked?'>clicked?</span><span class='lparen'>(</span><span class='ivar'>@mouse_point</span><span class='comma'>,</span> <span class='id identifier rubyid_kind'>kind</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_clicked_sprite'>clicked_sprite</span>

    <span class='ivar'>@expecting_mouse_up</span> <span class='op'>|=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_clicked_sprite'>clicked_sprite</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_mouse_only_down'>mouse_only_down</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='ivar'>@absorb_list</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_clickable'>clickable</span>

    <span class='comment'># puts &quot;Zif::Services::InputService#process_click: #{@expecting_mouse_up.length} expecting&quot;
</span>    <span class='comment'># puts &quot;Zif::Services::InputService#process_click: -&gt; sprite handled click #{clicked_sprite}&quot;
</span>  <span class='kw'>end</span>

  <span class='ivar'>@expecting_mouse_up</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_mouse_up'>mouse_up</span>
  <span class='ivar'>@last_mouse_bits</span> <span class='op'>=</span> <span class='id identifier rubyid_mouse_bits'>mouse_bits</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_key_event-instance_method">
  
    #<strong>process_key_event</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_key_event'>process_key_event</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@key_pressables</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_text_keys'>text_keys</span> <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span>
  <span class='id identifier rubyid_all_keys'>all_keys</span> <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_keyboard'>keyboard</span><span class='period'>.</span><span class='id identifier rubyid_key_down'>key_down</span><span class='period'>.</span><span class='id identifier rubyid_truthy_keys'>truthy_keys</span>

  <span class='id identifier rubyid_text_keys'>text_keys</span> <span class='op'>&lt;&lt;</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_text_keys'>text_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_all_keys'>all_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_text_keys'>text_keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
    <span class='ivar'>@key_pressables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key_pressable'>key_pressable</span><span class='op'>|</span>
      <span class='comment'># puts &quot;Zif::Services::InputService#process_key_event:#{key} #{all_keys} key_pressable:#{key_pressable.class} #{key_pressable}&quot;
</span>      <span class='id identifier rubyid_key_pressable'>key_pressable</span><span class='period'>.</span><span class='id identifier rubyid_handle_key'>handle_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_all_keys'>all_keys</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_scroll-instance_method">
  
    #<strong>process_scroll</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_scroll'>process_scroll</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@scrollables</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_wheel'>wheel</span> <span class='op'>=</span> <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='period'>.</span><span class='id identifier rubyid_mouse'>mouse</span><span class='period'>.</span><span class='id identifier rubyid_wheel'>wheel</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_wheel'>wheel</span>

  <span class='id identifier rubyid_wheel_direction'>wheel_direction</span> <span class='op'>=</span> <span class='id identifier rubyid_wheel'>wheel</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_positive?'>positive?</span> <span class='op'>?</span> <span class='symbol'>:up</span> <span class='op'>:</span> <span class='symbol'>:down</span>

  <span class='ivar'>@scrollables</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_scrollable'>scrollable</span><span class='op'>|</span>
    <span class='id identifier rubyid_scrollable'>scrollable</span><span class='period'>.</span><span class='id identifier rubyid_scrolled?'>scrolled?</span><span class='lparen'>(</span><span class='ivar'>@mouse_point</span><span class='comma'>,</span> <span class='id identifier rubyid_wheel_direction'>wheel_direction</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_clickable-instance_method">
  
    #<strong>register_clickable</strong>(clickable, absorb_click: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a <span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span> object to the list of clickables to check every tick. Clickables in this list are sorted by their <code>z_index</code> and checked in <strong>descending</strong> order. Clickable objects should respond to #clicked?(point, kind) and optionally #absorb_click?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>clickable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Zif::Clickable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A clickable object</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>absorb_click</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Should <code>clickable</code> absorb clicks? If <code>clickable</code> responds to <code>#absorb_click?</code>, this is true by default.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_clickable'>register_clickable</span><span class='lparen'>(</span><span class='id identifier rubyid_clickable'>clickable</span><span class='comma'>,</span> <span class='label'>absorb_click:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@clickables</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_clickable'>clickable</span>
  <span class='ivar'>@absorb_list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_clickable'>clickable</span> <span class='kw'>if</span> <span class='id identifier rubyid_absorb_click'>absorb_click</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_clickable'>clickable</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:absorb_click?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_clickable'>clickable</span><span class='period'>.</span><span class='id identifier rubyid_absorb_click?'>absorb_click?</span><span class='rparen'>)</span>
  <span class='ivar'>@clickables</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='int'>1</span> <span class='kw'>unless</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:z_index</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='op'>-</span><span class='int'>1</span> <span class='kw'>unless</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:z_index</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_z_index'>z_index</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_z_index'>z_index</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_clickable'>clickable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_key_pressable-instance_method">
  
    #<strong>register_key_pressable</strong>(key_pressable)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a <span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">KeyPressable</a></span> object to the list of keypressables to check every tick. Keypressable objects should respond to handle_key(key, kind=:down)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key_pressable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">Zif::KeyPressable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A Keypressable object</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_key_pressable'>register_key_pressable</span><span class='lparen'>(</span><span class='id identifier rubyid_key_pressable'>key_pressable</span><span class='rparen'>)</span>
  <span class='ivar'>@key_pressables</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_key_pressable'>key_pressable</span>
  <span class='id identifier rubyid_key_pressable'>key_pressable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_scrollable-instance_method">
  
    #<strong>register_scrollable</strong>(scrollable, absorb_scroll = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>Add Zif::Scrollable ?</p>
</div>
  </div>


<p>Scrollable objects should respond to #scroll?(point, direction) and optionally #absorb_scroll?</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_scrollable'>register_scrollable</span><span class='lparen'>(</span><span class='id identifier rubyid_scrollable'>scrollable</span><span class='comma'>,</span> <span class='id identifier rubyid_absorb_scroll'>absorb_scroll</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@scrollables</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scrollable'>scrollable</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_absorb_scroll'>absorb_scroll</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_scrollable'>scrollable</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:absorb_scroll?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_scrollable'>scrollable</span><span class='period'>.</span><span class='id identifier rubyid_absorb_scroll?'>absorb_scroll?</span><span class='rparen'>)</span>
    <span class='ivar'>@absorb_list</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scrollable'>scrollable</span>
  <span class='kw'>end</span>

  <span class='ivar'>@scrollables</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='int'>1</span> <span class='kw'>unless</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:z_index</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='op'>-</span><span class='int'>1</span> <span class='kw'>unless</span> <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:z_index</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_z_index'>z_index</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_z_index'>z_index</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_scrollable'>scrollable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_clickable-instance_method">
  
    #<strong>remove_clickable</strong>(clickable)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Removes an <span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Clickable</a></span> from the clickables array.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>clickable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Clickable.html" title="Zif::Clickable (module)">Zif::Clickable</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_clickable'>remove_clickable</span><span class='lparen'>(</span><span class='id identifier rubyid_clickable'>clickable</span><span class='rparen'>)</span>
  <span class='ivar'>@clickables</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_clickable'>clickable</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_key_pressable-instance_method">
  
    #<strong>remove_key_pressable</strong>(key_pressable)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Removes an <span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">KeyPressable</a></span> from the keypressables array.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key_pressable</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../KeyPressable.html" title="Zif::KeyPressable (module)">Zif::KeyPressable</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_key_pressable'>remove_key_pressable</span><span class='lparen'>(</span><span class='id identifier rubyid_key_pressable'>key_pressable</span><span class='rparen'>)</span>
  <span class='ivar'>@key_pressables</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_key_pressable'>key_pressable</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove_scrollable-instance_method">
  
    #<strong>remove_scrollable</strong>(scrollable)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Removes a scrollable from the scrollables array.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remove_scrollable'>remove_scrollable</span><span class='lparen'>(</span><span class='id identifier rubyid_scrollable'>scrollable</span><span class='rparen'>)</span>
  <span class='ivar'>@scrollables</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_scrollable'>scrollable</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset-instance_method">
  
    #<strong>reset</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the list of clickables, scrollables, etc.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/zif/services/input_service.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset'>reset</span>
  <span class='ivar'>@clickables</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@scrollables</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@absorb_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@expecting_mouse_up</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@key_pressables</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Aug 15 20:07:40 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.2.2).
</div>

    </div>
  </body>
</html>