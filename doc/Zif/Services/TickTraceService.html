<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Zif::Services::TickTraceService
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Zif::Services::TickTraceService";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Zif.html" title="Zif (module)">Zif</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Services.html" title="Zif::Services (module)">Services</a></span></span>
     &raquo; 
    <span class="title">TickTraceService</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Zif::Services::TickTraceService
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Zif::Services::TickTraceService</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/lib/zif/services/tick_trace_service.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This service is for performance tuning your game.</p>

<p>It is set up and torn down for you if you use Zif::Game The idea is that you</p>
<ul><li>
<p><span class='object_link'><a href="#reset_tick-instance_method" title="Zif::Services::TickTraceService#reset_tick (method)">#reset_tick</a></span> in the beginning of your tick, then</p>
</li><li>
<p>include <span class='object_link'><a href="../Traceable.html" title="Zif::Traceable (module)">Traceable</a></span> and then use <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span> to timestamp important areas in your code during a tick,</p>

<pre class="code ruby"><code class="ruby"><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_g'>g</span><span class='period'>.</span> <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#my_method: Just did something!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rparen'>)</span>
</code></pre>
</li><li>
<p>and finally <span class='object_link'><a href="#finish-instance_method" title="Zif::Services::TickTraceService#finish (method)">#finish</a></span> the tick</p>
</li></ul>

<p>If your tick takes longer than <span class='object_link'><a href="#time_threshold-instance_method" title="Zif::Services::TickTraceService#time_threshold (method)">#time_threshold</a></span>, it will report the full trace info and highlight the section which took the most time to execute.  The game will begin to dip below 60fps if your tick takes longer than about 16ms, but the default threshold is 20ms so it should only notify you if something is really off.</p>

<p>Turn on running average calculation by setting <span class='object_link'><a href="#measure_averages-instance_method" title="Zif::Services::TickTraceService#measure_averages (method)">#measure_averages</a></span> to <code>true</code></p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#averages-instance_method" title="#averages (instance method)">#<strong>averages</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A data structure used to save min/max/avg times for each marked section of code.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_tick_ms-instance_method" title="#last_tick_ms (instance method)">#<strong>last_tick_ms</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The amount of time the last tick took, in milliseconds, as a string.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#measure_averages-instance_method" title="#measure_averages (instance method)">#<strong>measure_averages</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Should the service report average times?  This is somewhat computationally expensive.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#slowest_avg_mark-instance_method" title="#slowest_avg_mark (instance method)">#<strong>slowest_avg_mark</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The amount of time the average slowest marked section of code takes every tick, in ms.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#slowest_mark-instance_method" title="#slowest_mark (instance method)">#<strong>slowest_mark</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A string label for the slowest measured <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span>ed section of code.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#slowest_max_mark-instance_method" title="#slowest_max_mark (instance method)">#<strong>slowest_max_mark</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The amount of time the slowest marked section of code ever seen took, in ms.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_threshold-instance_method" title="#time_threshold (instance method)">#<strong>time_threshold</strong>  &#x21d2; Float </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Time, in seconds.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      1. Public Interface
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_averages-instance_method" title="#clear_averages (instance method)">#<strong>clear_averages</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the data saved for average time spent in your marked sections of code.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable!-instance_method" title="#disable! (instance method)">#<strong>disable!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Turns off the TickTrace analysis.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable!-instance_method" title="#enable! (instance method)">#<strong>enable!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Turns on the TickTrace analysis.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enabled%3F-instance_method" title="#enabled? (instance method)">#<strong>enabled?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is TickTrace turned on?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(time_threshold: 0.02, measure_averages: false)  &#x21d2; TickTraceService </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of TickTraceService.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_label-instance_method" title="#last_label (instance method)">#<strong>last_label</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This is used to extract the name of the last <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span>-ed code.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mark-instance_method" title="#mark (instance method)">#<strong>mark</strong>(label)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Invoke this method to tell the TickTraceService that a section of code has completed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_tick-instance_method" title="#reset_tick (instance method)">#<strong>reset_tick</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Resets the time measurement for this tick, typically used at the beginning of your tick.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      2. Private-ish methods
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finish-instance_method" title="#finish (instance method)">#<strong>finish</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>You only need to call this method directly if you are using this service without <span class='object_link'><a href="../Game.html" title="Zif::Game (class)">Game</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_ms-instance_method" title="#format_ms (instance method)">#<strong>format_ms</strong>(in_seconds)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>There&#39;s gotta be a better way to do this..</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print_times-instance_method" title="#print_times (instance method)">#<strong>print_times</strong>(indented = 2)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
<p>Prints the time elapsed for each marked section of code in this tick.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(time_threshold: 0.02, measure_averages: false)  &#x21d2; <tt><span class='object_link'><a href="" title="Zif::Services::TickTraceService (class)">TickTraceService</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of TickTraceService.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>time_threshold</span>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0.02</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><span class='object_link'><a href="#time_threshold-instance_method" title="Zif::Services::TickTraceService#time_threshold (method)">#time_threshold</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>measure_averages</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p><span class='object_link'><a href="#measure_averages-instance_method" title="Zif::Services::TickTraceService#measure_averages (method)">#measure_averages</a></span></p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>time_threshold:</span> <span class='float'>0.02</span><span class='comma'>,</span> <span class='label'>measure_averages:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@time_threshold</span> <span class='op'>=</span> <span class='id identifier rubyid_time_threshold'>time_threshold</span>
  <span class='ivar'>@measure_averages</span> <span class='op'>=</span> <span class='id identifier rubyid_measure_averages'>measure_averages</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_clear_averages'>clear_averages</span>
  <span class='id identifier rubyid_reset_tick'>reset_tick</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="averages-instance_method">
  
    #<strong>averages</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns A data structure used to save min/max/avg times for each marked section of code.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A data structure used to save min/max/avg times for each marked section of code.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_averages'>averages</span>
  <span class='ivar'>@averages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="last_tick_ms-instance_method">
  
    #<strong>last_tick_ms</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The amount of time the last tick took, in milliseconds, as a string.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The amount of time the last tick took, in milliseconds, as a string</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_tick_ms'>last_tick_ms</span>
  <span class='ivar'>@last_tick_ms</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="measure_averages=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="measure_averages-instance_method">
  
    #<strong>measure_averages</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Should the service report average times?  This is somewhat computationally expensive.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Should the service report average times?  This is somewhat computationally expensive.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_measure_averages'>measure_averages</span>
  <span class='ivar'>@measure_averages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="slowest_avg_mark=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="slowest_avg_mark-instance_method">
  
    #<strong>slowest_avg_mark</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The amount of time the average slowest marked section of code takes every tick, in ms.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The amount of time the average slowest marked section of code takes every tick, in ms</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_slowest_avg_mark'>slowest_avg_mark</span>
  <span class='ivar'>@slowest_avg_mark</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="slowest_mark-instance_method">
  
    #<strong>slowest_mark</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns A string label for the slowest measured <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span>ed section of code.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A string label for the slowest measured <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span>ed section of code.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_slowest_mark'>slowest_mark</span>
  <span class='ivar'>@slowest_mark</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="slowest_max_mark=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="slowest_max_mark-instance_method">
  
    #<strong>slowest_max_mark</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The amount of time the slowest marked section of code ever seen took, in ms.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The amount of time the slowest marked section of code ever seen took, in ms</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_slowest_max_mark'>slowest_max_mark</span>
  <span class='ivar'>@slowest_max_mark</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="time_threshold=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="time_threshold-instance_method">
  
    #<strong>time_threshold</strong>  &#x21d2; <tt>Float</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Time, in seconds.  A trace report is generated if your tick takes longer than this amount.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Float</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Time, in seconds.  A trace report is generated if your tick takes longer than this amount.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_time_threshold'>time_threshold</span>
  <span class='ivar'>@time_threshold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clear_averages-instance_method">
  
    #<strong>clear_averages</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the data saved for average time spent in your marked sections of code. Calculating averages is computationally expensive based on the number of unique marked sections of code that have been measured, so clearing the averages is a good idea if you have built up too many unique sections.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_averages'>clear_averages</span>
  <span class='ivar'>@averages</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_h'>h</span><span class='comma'>,</span> <span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='id identifier rubyid_h'>h</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>min:</span>   <span class='const'>Float</span><span class='op'>::</span><span class='const'>INFINITY</span><span class='comma'>,</span>
      <span class='label'>max:</span>   <span class='op'>-</span><span class='const'>Float</span><span class='op'>::</span><span class='const'>INFINITY</span><span class='comma'>,</span>
      <span class='label'>avg:</span>   <span class='kw'>nil</span><span class='comma'>,</span>
      <span class='label'>count:</span> <span class='int'>0</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable!-instance_method">
  
    #<strong>disable!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Turns off the TickTrace analysis</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_disable!'>disable!</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enable!-instance_method">
  
    #<strong>enable!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Turns on the TickTrace analysis</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enable!'>enable!</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enabled?-instance_method">
  
    #<strong>enabled?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Is TickTrace turned on?.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Is TickTrace turned on?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enabled?'>enabled?</span>
  <span class='ivar'>@enabled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="finish-instance_method">
  
    #<strong>finish</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>You only need to call this method directly if you are using this service without <span class='object_link'><a href="../Game.html" title="Zif::Game (class)">Game</a></span>. Tells the TickTraceService that the tick is complete and it should finish analysis for this tick. If your tick has taken longer than <span class='object_link'><a href="#time_threshold-instance_method" title="Zif::Services::TickTraceService#time_threshold (method)">#time_threshold</a></span>, a report is generated.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_finish'>finish</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'>enabled?</span>

  <span class='id identifier rubyid_elapsed'>elapsed</span> <span class='op'>=</span> <span class='ivar'>@last_time</span> <span class='op'>-</span> <span class='ivar'>@start_time</span>
  <span class='ivar'>@last_tick_ms</span> <span class='op'>=</span> <span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_elapsed'>elapsed</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='ivar'>@measure_averages</span>
    <span class='id identifier rubyid_avg_culprit'>avg_culprit</span><span class='comma'>,</span> <span class='id identifier rubyid_avg_culprit_time'>avg_culprit_time</span> <span class='op'>=</span> <span class='ivar'>@averages</span><span class='period'>.</span><span class='id identifier rubyid_max_by'>max_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__label'>_label</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='op'>|</span> <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='ivar'>@slowest_avg_mark</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_avg_culprit'>avg_culprit</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_avg_culprit_time'>avg_culprit_time</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_max_culprit'>max_culprit</span><span class='comma'>,</span> <span class='id identifier rubyid_max_culprit_time'>max_culprit_time</span> <span class='op'>=</span> <span class='ivar'>@averages</span><span class='period'>.</span><span class='id identifier rubyid_max_by'>max_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__label'>_label</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='op'>|</span> <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:max</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='ivar'>@slowest_max_mark</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_max_culprit'>max_culprit</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_max_culprit_time'>max_culprit_time</span><span class='lbracket'>[</span><span class='symbol'>:max</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_over_threshold'>over_threshold</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_elapsed'>elapsed</span> <span class='op'>&gt;</span> <span class='ivar'>@time_threshold</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_over_threshold'>over_threshold</span>

  <span class='id identifier rubyid_culprit'>culprit</span> <span class='op'>=</span> <span class='ivar'>@times</span><span class='period'>.</span><span class='id identifier rubyid_max_by'>max_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='op'>|</span> <span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:delta</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='ivar'>@slowest_mark</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_culprit'>culprit</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_culprit'>culprit</span><span class='lbracket'>[</span><span class='symbol'>:delta</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_tick_details'>tick_details</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@last_tick_ms</span><span class='embexpr_end'>}</span><span class='tstring_content'> elapsed &gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='ivar'>@time_threshold</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> threshold, </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_tick_details'>tick_details</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>longest step </span><span class='embexpr_beg'>#{</span><span class='ivar'>@slowest_mark</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>=</span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='int'>80</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Zif::Services::TickTraceService: Slow tick. </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tick_details'>tick_details</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_print_times'>print_times</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_ms-instance_method">
  
    #<strong>format_ms</strong>(in_seconds)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>There&#39;s gotta be a better way to do this.. â€¦all because &#39;%3.3f&#39; % 0.12 will print &#39;0.120&#39; instead of &#39;  0.120&#39;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_in_seconds'>in_seconds</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ms'>ms</span> <span class='op'>=</span> <span class='id identifier rubyid_in_seconds'>in_seconds</span> <span class='op'>*</span> <span class='float'>1000.0</span>
  <span class='id identifier rubyid_whole_ms'>whole_ms</span> <span class='op'>=</span> <span class='id identifier rubyid_ms'>ms</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
  <span class='id identifier rubyid_dec'>dec</span> <span class='op'>=</span> <span class='id identifier rubyid_ms'>ms</span> <span class='op'>-</span> <span class='id identifier rubyid_whole_ms'>whole_ms</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%3d</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> <span class='id identifier rubyid_whole_ms'>whole_ms</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.3f</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> <span class='id identifier rubyid_dec'>dec</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0.</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>ms</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_label-instance_method">
  
    #<strong>last_label</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This is used to extract the name of the last <span class='object_link'><a href="#mark-instance_method" title="Zif::Services::TickTraceService#mark (method)">#mark</a></span>-ed code. Useful for exception messages.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_label'>last_label</span>
  <span class='ivar'>@times</span><span class='op'>&amp;.</span><span class='id identifier rubyid_last'>last</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='symbol'>:label</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mark-instance_method">
  
    #<strong>mark</strong>(label)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Invoke this method to tell the TickTraceService that a section of code has completed. Time is measured between marked sections.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>label</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of the section of code prior to this call.  Used in reporting</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mark'>mark</span><span class='lparen'>(</span><span class='id identifier rubyid_label'>label</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_enabled?'>enabled?</span>

  <span class='id identifier rubyid_t'>t</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_delta'>delta</span> <span class='op'>=</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>-</span> <span class='ivar'>@last_time</span>
  <span class='ivar'>@times</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
    <span class='label'>label:</span>   <span class='id identifier rubyid_label'>label</span><span class='comma'>,</span>
    <span class='label'>delta:</span>   <span class='id identifier rubyid_delta'>delta</span><span class='comma'>,</span>
    <span class='label'>elapsed:</span> <span class='id identifier rubyid_t'>t</span> <span class='op'>-</span> <span class='ivar'>@start_time</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@last_time</span> <span class='op'>=</span> <span class='id identifier rubyid_t'>t</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@measure_averages</span>

  <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:min</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:min</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
  <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:max</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:max</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_delta'>delta</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>

  <span class='kw'>if</span> <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span>
    <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span> <span class='op'>=</span>
      <span class='lparen'>(</span><span class='lparen'>(</span><span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_delta'>delta</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_fdiv'>fdiv</span><span class='lparen'>(</span><span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>

  <span class='kw'>else</span>
    <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:avg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_delta'>delta</span>
  <span class='kw'>end</span>

  <span class='ivar'>@averages</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:count</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="print_times-instance_method">
  
    #<strong>print_times</strong>(indented = 2)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>

<p>Prints the time elapsed for each marked section of code in this tick.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_print_times'>print_times</span><span class='lparen'>(</span><span class='id identifier rubyid_indented'>indented</span><span class='op'>=</span><span class='int'>2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_indent'>indent</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_indented'>indented</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_indent'>indent</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%9s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mark</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%9s</span><span class='tstring_end'>&#39;</span></span> <span class='op'>%</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>delta</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'> label</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@times</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='op'>|</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_indented'>indented</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:elapsed</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_format_ms'>format_ms</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:delta</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_tick-instance_method">
  
    #<strong>reset_tick</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Resets the time measurement for this tick, typically used at the beginning of your tick.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/lib/zif/services/tick_trace_service.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_tick'>reset_tick</span>
  <span class='ivar'>@times</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='ivar'>@last_time</span> <span class='op'>=</span> <span class='ivar'>@start_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Mar  4 22:14:03 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.6.3).
</div>

    </div>
  </body>
</html>